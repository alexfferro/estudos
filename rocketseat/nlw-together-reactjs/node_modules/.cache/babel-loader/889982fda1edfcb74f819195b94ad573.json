{"ast":null,"code":"import _regeneratorRuntime from\"/home/alexferro/Documents/GitHub/estudos/rocketseat/nlw-together-reactjs/letmeask/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/alexferro/Documents/GitHub/estudos/rocketseat/nlw-together-reactjs/letmeask/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/alexferro/Documents/GitHub/estudos/rocketseat/nlw-together-reactjs/letmeask/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{Link,useHistory}from'react-router-dom';import{useState}from'react';import{useAuth}from'../hooks/useAuth';import{database}from'../services/firebase';import illustrationImg from'../assets/images/illustration.svg';import logoImg from'../assets/images/logo.svg';import{Button}from\"../components/Button\";import'../styles/auth.scss';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export function NewRoom(){var _useAuth=useAuth(),user=_useAuth.user;var history=useHistory();var _useState=useState(''),_useState2=_slicedToArray(_useState,2),newRoom=_useState2[0],setNewRoom=_useState2[1];function handleCreateRoom(_x){return _handleCreateRoom.apply(this,arguments);}function _handleCreateRoom(){_handleCreateRoom=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(event){var roomRef,firebaseRoom;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:event.preventDefault();if(!(newRoom.trim()==='')){_context.next=3;break;}return _context.abrupt(\"return\");case 3:roomRef=database.ref('rooms');_context.next=6;return roomRef.push({title:newRoom,authorId:user===null||user===void 0?void 0:user.id});case 6:firebaseRoom=_context.sent;history.push(\"/rooms/\".concat(firebaseRoom.key));case 8:case\"end\":return _context.stop();}}},_callee);}));return _handleCreateRoom.apply(this,arguments);}return/*#__PURE__*/_jsxs(\"div\",{id:\"page-auth\",children:[/*#__PURE__*/_jsxs(\"aside\",{children:[/*#__PURE__*/_jsx(\"img\",{src:illustrationImg,alt:\"Ilustra\\xE7\\xE3o que representa perguntas e respostas\"}),/*#__PURE__*/_jsx(\"strong\",{children:\"Crie salas de Q&A ao-vivo\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Tire as d\\xFAvidas da sua audi\\xEAncia em tempo real\"})]}),/*#__PURE__*/_jsx(\"main\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"main-content\",children:[/*#__PURE__*/_jsx(\"img\",{src:logoImg,alt:\"Letmeask\"}),/*#__PURE__*/_jsx(\"h2\",{children:\"Criar uma nova sala\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleCreateRoom,children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Nome da sala\",onChange:function onChange(event){return setNewRoom(event.target.value);},value:newRoom}),/*#__PURE__*/_jsx(Button,{type:\"submit\",children:\"Criar Sala\"})]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Quer entrar em uma sala existente? \",/*#__PURE__*/_jsx(Link,{to:\"/\",children:\"clique aqui\"})]})]})})]});}","map":{"version":3,"names":["Link","useHistory","useState","useAuth","database","illustrationImg","logoImg","Button","NewRoom","user","history","newRoom","setNewRoom","handleCreateRoom","event","preventDefault","trim","roomRef","ref","push","title","authorId","id","firebaseRoom","key","target","value"],"sources":["/home/alexferro/Documents/GitHub/estudos/rocketseat/nlw-together-reactjs/letmeask/src/pages/NewRoom.tsx"],"sourcesContent":["import { Link, useHistory } from 'react-router-dom';\nimport {FormEvent, useState} from 'react'\n\nimport { useAuth } from '../hooks/useAuth';\nimport { database } from '../services/firebase';\n\nimport illustrationImg from '../assets/images/illustration.svg'\nimport logoImg from '../assets/images/logo.svg'\n\nimport { Button } from \"../components/Button\";\nimport '../styles/auth.scss'\n\nexport function NewRoom(){\n  const {user} = useAuth();\n  const history = useHistory();\n  const [newRoom, setNewRoom] = useState('');\n\n  async function handleCreateRoom(event: FormEvent){\n    event.preventDefault();\n\n    if (newRoom.trim() === ''){\n      return;\n    }\n\n    const roomRef = database.ref('rooms');\n\n    const firebaseRoom = await roomRef.push({\n      title: newRoom,\n      authorId: user?.id,\n    });\n\n    history.push(`/rooms/${firebaseRoom.key}`)\n  }\n\n  return (\n    <div id='page-auth'>\n      <aside>\n        <img src={illustrationImg} alt=\"Ilustração que representa perguntas e respostas\"/>\n        <strong>Crie salas de Q&amp;A ao-vivo</strong>\n        <p>Tire as dúvidas da sua audiência em tempo real</p>\n      </aside>\n      <main>\n        <div className='main-content'>\n          <img src={logoImg} alt=\"Letmeask\" />\n          <h2>Criar uma nova sala</h2>\n          <form onSubmit={handleCreateRoom} >\n            <input\n            type=\"text\"\n            placeholder='Nome da sala'\n            onChange={event => setNewRoom(event.target.value)}\n            value={newRoom}\n            />\n            <Button type=\"submit\">\n              Criar Sala\n            </Button>\n          </form>\n          <p>\n            Quer entrar em uma sala existente? <Link to='/'>clique aqui</Link>\n          </p>\n        </div>\n      </main>\n    </div>\n  )\n}"],"mappings":"qgBAAA,OAASA,IAAT,CAAeC,UAAf,KAAiC,kBAAjC,CACA,OAAmBC,QAAnB,KAAkC,OAAlC,CAEA,OAASC,OAAT,KAAwB,kBAAxB,CACA,OAASC,QAAT,KAAyB,sBAAzB,CAEA,MAAOC,gBAAP,KAA4B,mCAA5B,CACA,MAAOC,QAAP,KAAoB,2BAApB,CAEA,OAASC,MAAT,KAAuB,sBAAvB,CACA,MAAO,qBAAP,C,wFAEA,MAAO,SAASC,QAAT,EAAkB,CACvB,aAAeL,OAAO,EAAtB,CAAOM,IAAP,UAAOA,IAAP,CACA,GAAMC,QAAO,CAAGT,UAAU,EAA1B,CACA,cAA8BC,QAAQ,CAAC,EAAD,CAAtC,wCAAOS,OAAP,eAAgBC,UAAhB,eAHuB,QAKRC,iBALQ,8JAKvB,iBAAgCC,KAAhC,6IACEA,KAAK,CAACC,cAAN,GADF,KAGMJ,OAAO,CAACK,IAAR,KAAmB,EAHzB,kEAOQC,OAPR,CAOkBb,QAAQ,CAACc,GAAT,CAAa,OAAb,CAPlB,uBAS6BD,QAAO,CAACE,IAAR,CAAa,CACtCC,KAAK,CAAET,OAD+B,CAEtCU,QAAQ,CAAEZ,IAAF,SAAEA,IAAF,iBAAEA,IAAI,CAAEa,EAFsB,CAAb,CAT7B,QASQC,YATR,eAcEb,OAAO,CAACS,IAAR,kBAAuBI,YAAY,CAACC,GAApC,GAdF,sDALuB,mDAsBvB,mBACE,aAAK,EAAE,CAAC,WAAR,wBACE,sCACE,YAAK,GAAG,CAAEnB,eAAV,CAA2B,GAAG,CAAC,uDAA/B,EADF,cAEE,qDAFF,cAGE,2EAHF,GADF,cAME,mCACE,aAAK,SAAS,CAAC,cAAf,wBACE,YAAK,GAAG,CAAEC,OAAV,CAAmB,GAAG,CAAC,UAAvB,EADF,cAEE,2CAFF,cAGE,cAAM,QAAQ,CAAEO,gBAAhB,wBACE,cACA,IAAI,CAAC,MADL,CAEA,WAAW,CAAC,cAFZ,CAGA,QAAQ,CAAE,kBAAAC,KAAK,QAAIF,WAAU,CAACE,KAAK,CAACW,MAAN,CAAaC,KAAd,CAAd,EAHf,CAIA,KAAK,CAAEf,OAJP,EADF,cAOE,KAAC,MAAD,EAAQ,IAAI,CAAC,QAAb,wBAPF,GAHF,cAcE,wEACqC,KAAC,IAAD,EAAM,EAAE,CAAC,GAAT,yBADrC,GAdF,GADF,EANF,GADF,CA6BD"},"metadata":{},"sourceType":"module"}