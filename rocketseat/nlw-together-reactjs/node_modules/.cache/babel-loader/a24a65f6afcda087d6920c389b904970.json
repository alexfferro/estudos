{"ast":null,"code":"import _regeneratorRuntime from\"/home/alexferro/Documents/GitHub/estudos/rocketseat/nlw-together-reactjs/letmeask/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/alexferro/Documents/GitHub/estudos/rocketseat/nlw-together-reactjs/letmeask/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import{RoomCode}from'../components/RoomCode';import{Button}from'../components/Button';import{Question}from'../components/Question';import{useHistory,useParams}from'react-router-dom';import{useRoom}from'../hooks/useRoom';// import { useAuth } from '../hooks/useAuth'\nimport logoImg from'../assets/images/logo.svg';import deleteImg from'../assets/images/delete.svg';import checkImg from'../assets/images/check.svg';import answerImg from'../assets/images/answer.svg';import'../styles/room.scss';import{database}from'../services/firebase';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export function AdminRoom(){// const {user} = useAuth();\nvar history=useHistory();var params=useParams();var roomId=params.id;var _useRoom=useRoom(roomId),questions=_useRoom.questions,title=_useRoom.title;function handleEndRoom(){return _handleEndRoom.apply(this,arguments);}function _handleEndRoom(){_handleEndRoom=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return database.ref(\"rooms/\".concat(roomId)).update({endedAt:new Date()});case 2:history.push('/');case 3:case\"end\":return _context.stop();}}},_callee);}));return _handleEndRoom.apply(this,arguments);}function handleDeleteQuestion(_x){return _handleDeleteQuestion.apply(this,arguments);}function _handleDeleteQuestion(){_handleDeleteQuestion=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(questionId){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(!window.confirm('Tem certeza que deseja excluir esta pergunta ?')){_context2.next=3;break;}_context2.next=3;return database.ref(\"rooms/\".concat(roomId,\"/questions/\").concat(questionId)).remove();case 3:case\"end\":return _context2.stop();}}},_callee2);}));return _handleDeleteQuestion.apply(this,arguments);}function handleCheckQuestionAsAnswered(_x2){return _handleCheckQuestionAsAnswered.apply(this,arguments);}function _handleCheckQuestionAsAnswered(){_handleCheckQuestionAsAnswered=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(questionId){return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return database.ref(\"rooms/\".concat(roomId,\"/questions/\").concat(questionId)).update({isAnswered:true});case 2:case\"end\":return _context3.stop();}}},_callee3);}));return _handleCheckQuestionAsAnswered.apply(this,arguments);}function handleHighlightQuestion(_x3){return _handleHighlightQuestion.apply(this,arguments);}function _handleHighlightQuestion(){_handleHighlightQuestion=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(questionId){return _regeneratorRuntime().wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return database.ref(\"rooms/\".concat(roomId,\"/questions/\").concat(questionId)).update({isHighlighted:true});case 2:case\"end\":return _context4.stop();}}},_callee4);}));return _handleHighlightQuestion.apply(this,arguments);}return/*#__PURE__*/_jsxs(\"div\",{id:\"page-room\",children:[/*#__PURE__*/_jsx(\"header\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"content\",children:[/*#__PURE__*/_jsx(\"img\",{src:logoImg,alt:\"Letmeask\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(RoomCode,{code:roomId}),/*#__PURE__*/_jsx(Button,{isOutlined:true,onClick:handleEndRoom,children:\"Encerrar Sala\"})]})]})}),/*#__PURE__*/_jsxs(\"main\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"room-title\",children:[/*#__PURE__*/_jsxs(\"h1\",{children:[\"Sala \",title]}),questions.length>0&&/*#__PURE__*/_jsxs(\"span\",{children:[questions.length,\" pergunta(s)\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"question-list\",children:questions.map(function(question){return/*#__PURE__*/_jsxs(Question,{content:question.content,author:question.author,isAnswered:question.isAnswered,isHighlighted:question.isHighlighted,children:[!question.isAnswered&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:function onClick(){return handleCheckQuestionAsAnswered(question.id);},children:/*#__PURE__*/_jsx(\"img\",{src:checkImg,alt:\"Marcar pergunta como respondida\"})}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:function onClick(){return handleHighlightQuestion(question.id);},children:/*#__PURE__*/_jsx(\"img\",{src:answerImg,alt:\"dar destaque a pergunta\"})})]}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:function onClick(){return handleDeleteQuestion(question.id);},children:/*#__PURE__*/_jsx(\"img\",{src:deleteImg,alt:\"Bot\\xE3o para remover mensagem\"})})]},question.id);})})]})]});}","map":{"version":3,"names":["RoomCode","Button","Question","useHistory","useParams","useRoom","logoImg","deleteImg","checkImg","answerImg","database","AdminRoom","history","params","roomId","id","questions","title","handleEndRoom","ref","update","endedAt","Date","push","handleDeleteQuestion","questionId","window","confirm","remove","handleCheckQuestionAsAnswered","isAnswered","handleHighlightQuestion","isHighlighted","length","map","question","content","author"],"sources":["/home/alexferro/Documents/GitHub/estudos/rocketseat/nlw-together-reactjs/letmeask/src/pages/AdminRoom.tsx"],"sourcesContent":["import { RoomCode } from '../components/RoomCode'\nimport { Button } from '../components/Button'\nimport { Question } from '../components/Question'\n\nimport { useHistory, useParams } from 'react-router-dom'\nimport { useRoom } from '../hooks/useRoom'\n// import { useAuth } from '../hooks/useAuth'\n\nimport logoImg from '../assets/images/logo.svg'\nimport deleteImg from '../assets/images/delete.svg'\nimport checkImg from '../assets/images/check.svg'\nimport answerImg from '../assets/images/answer.svg'\n\nimport '../styles/room.scss'\nimport { database } from '../services/firebase'\n\ntype RoomParams = {\n  id: string;\n}\n\nexport function AdminRoom(){\n  // const {user} = useAuth();\n  const history = useHistory();\n  const params = useParams<RoomParams>();\n  const roomId = params.id\n\n  const { questions, title } = useRoom(roomId);\n\n  async function handleEndRoom(){\n    await database.ref(`rooms/${roomId}`).update({\n      endedAt: new Date(),\n    })\n\n    history.push('/');\n  }\n\n  async function handleDeleteQuestion(questionId: string){\n    if (window.confirm('Tem certeza que deseja excluir esta pergunta ?')){\n      await database.ref(`rooms/${roomId}/questions/${questionId}`).remove();\n    }\n  }\n\n  async function handleCheckQuestionAsAnswered(questionId: string){\n    await database.ref(`rooms/${roomId}/questions/${questionId}`).update({\n      isAnswered: true,\n    });\n  }\n\n  async function handleHighlightQuestion(questionId: string){\n    await database.ref(`rooms/${roomId}/questions/${questionId}`).update({\n      isHighlighted: true,\n    });\n  }\n\n  return (\n    <div id=\"page-room\">\n      <header>\n        <div className=\"content\">\n          <img src={logoImg} alt=\"Letmeask\" />\n          <div>\n            <RoomCode code={roomId}/>\n            <Button isOutlined onClick={handleEndRoom}>Encerrar Sala</Button>\n          </div>\n        </div>\n      </header>\n\n      <main>\n        <div className=\"room-title\">\n          <h1>Sala {title}</h1>\n          {questions.length > 0 && <span>{questions.length} pergunta(s)</span>}\n        </div>\n\n        <div className=\"question-list\">\n          {questions.map(question => {\n            return (\n              <Question\n              key={question.id}\n              content={question.content}\n              author={question.author}\n              isAnswered={question.isAnswered}\n              isHighlighted={question.isHighlighted}\n              >\n                {!question.isAnswered && (\n                  <>\n                    <button\n                    type='button'\n                    onClick={() => handleCheckQuestionAsAnswered(question.id)}\n                  >\n                      <img src={checkImg} alt=\"Marcar pergunta como respondida\" />\n                    </button>\n                    <button\n                    type='button'\n                    onClick={() => handleHighlightQuestion(question.id)}\n                  >\n                      <img src={answerImg} alt=\"dar destaque a pergunta\" />\n                    </button>\n                  </>\n                )}\n                <button\n                  type='button'\n                  onClick={() => handleDeleteQuestion(question.id)}\n                >\n                  <img src={deleteImg} alt=\"BotÃ£o para remover mensagem\" />\n                </button>\n              </Question>\n            )\n          })}\n        </div>\n      </main>\n    </div>\n  )\n}"],"mappings":"8VAAA,OAASA,QAAT,KAAyB,wBAAzB,CACA,OAASC,MAAT,KAAuB,sBAAvB,CACA,OAASC,QAAT,KAAyB,wBAAzB,CAEA,OAASC,UAAT,CAAqBC,SAArB,KAAsC,kBAAtC,CACA,OAASC,OAAT,KAAwB,kBAAxB,CACA;AAEA,MAAOC,QAAP,KAAoB,2BAApB,CACA,MAAOC,UAAP,KAAsB,6BAAtB,CACA,MAAOC,SAAP,KAAqB,4BAArB,CACA,MAAOC,UAAP,KAAsB,6BAAtB,CAEA,MAAO,qBAAP,CACA,OAASC,QAAT,KAAyB,sBAAzB,C,6IAMA,MAAO,SAASC,UAAT,EAAoB,CACzB;AACA,GAAMC,QAAO,CAAGT,UAAU,EAA1B,CACA,GAAMU,OAAM,CAAGT,SAAS,EAAxB,CACA,GAAMU,OAAM,CAAGD,MAAM,CAACE,EAAtB,CAEA,aAA6BV,OAAO,CAACS,MAAD,CAApC,CAAQE,SAAR,UAAQA,SAAR,CAAmBC,KAAnB,UAAmBA,KAAnB,CANyB,QAQVC,cARU,mJAQzB,2JACQR,SAAQ,CAACS,GAAT,iBAAsBL,MAAtB,GAAgCM,MAAhC,CAAuC,CAC3CC,OAAO,CAAE,GAAIC,KAAJ,EADkC,CAAvC,CADR,QAKEV,OAAO,CAACW,IAAR,CAAa,GAAb,EALF,sDARyB,wDAgBVC,qBAhBU,0KAgBzB,kBAAoCC,UAApC,4HACMC,MAAM,CAACC,OAAP,CAAe,gDAAf,CADN,iDAEUjB,SAAQ,CAACS,GAAT,iBAAsBL,MAAtB,uBAA0CW,UAA1C,GAAwDG,MAAxD,EAFV,yDAhByB,+DAsBVC,8BAtBU,sMAsBzB,kBAA6CJ,UAA7C,+IACQf,SAAQ,CAACS,GAAT,iBAAsBL,MAAtB,uBAA0CW,UAA1C,GAAwDL,MAAxD,CAA+D,CACnEU,UAAU,CAAE,IADuD,CAA/D,CADR,yDAtByB,wEA4BVC,wBA5BU,oLA4BzB,kBAAuCN,UAAvC,+IACQf,SAAQ,CAACS,GAAT,iBAAsBL,MAAtB,uBAA0CW,UAA1C,GAAwDL,MAAxD,CAA+D,CACnEY,aAAa,CAAE,IADoD,CAA/D,CADR,yDA5ByB,0DAkCzB,mBACE,aAAK,EAAE,CAAC,WAAR,wBACE,qCACE,aAAK,SAAS,CAAC,SAAf,wBACE,YAAK,GAAG,CAAE1B,OAAV,CAAmB,GAAG,CAAC,UAAvB,EADF,cAEE,oCACE,KAAC,QAAD,EAAU,IAAI,CAAEQ,MAAhB,EADF,cAEE,KAAC,MAAD,EAAQ,UAAU,KAAlB,CAAmB,OAAO,CAAEI,aAA5B,2BAFF,GAFF,GADF,EADF,cAWE,qCACE,aAAK,SAAS,CAAC,YAAf,wBACE,8BAAUD,KAAV,GADF,CAEGD,SAAS,CAACiB,MAAV,CAAmB,CAAnB,eAAwB,wBAAOjB,SAAS,CAACiB,MAAjB,kBAF3B,GADF,cAME,YAAK,SAAS,CAAC,eAAf,UACGjB,SAAS,CAACkB,GAAV,CAAc,SAAAC,QAAQ,CAAI,CACzB,mBACE,MAAC,QAAD,EAEA,OAAO,CAAEA,QAAQ,CAACC,OAFlB,CAGA,MAAM,CAAED,QAAQ,CAACE,MAHjB,CAIA,UAAU,CAAEF,QAAQ,CAACL,UAJrB,CAKA,aAAa,CAAEK,QAAQ,CAACH,aALxB,WAOG,CAACG,QAAQ,CAACL,UAAV,eACC,wCACE,eACA,IAAI,CAAC,QADL,CAEA,OAAO,CAAE,yBAAMD,8BAA6B,CAACM,QAAQ,CAACpB,EAAV,CAAnC,EAFT,uBAIE,YAAK,GAAG,CAAEP,QAAV,CAAoB,GAAG,CAAC,iCAAxB,EAJF,EADF,cAOE,eACA,IAAI,CAAC,QADL,CAEA,OAAO,CAAE,yBAAMuB,wBAAuB,CAACI,QAAQ,CAACpB,EAAV,CAA7B,EAFT,uBAIE,YAAK,GAAG,CAAEN,SAAV,CAAqB,GAAG,CAAC,yBAAzB,EAJF,EAPF,GARJ,cAuBE,eACE,IAAI,CAAC,QADP,CAEE,OAAO,CAAE,yBAAMe,qBAAoB,CAACW,QAAQ,CAACpB,EAAV,CAA1B,EAFX,uBAIE,YAAK,GAAG,CAAER,SAAV,CAAqB,GAAG,CAAC,gCAAzB,EAJF,EAvBF,GACK4B,QAAQ,CAACpB,EADd,CADF,CAgCD,CAjCA,CADH,EANF,GAXF,GADF,CAyDD"},"metadata":{},"sourceType":"module"}