{"ast":null,"code":"import _regeneratorRuntime from\"/home/alexferro/Documents/GitHub/estudos/rocketseat/nlw-together-reactjs/letmeask/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/alexferro/Documents/GitHub/estudos/rocketseat/nlw-together-reactjs/letmeask/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/alexferro/Documents/GitHub/estudos/rocketseat/nlw-together-reactjs/letmeask/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useHistory}from'react-router-dom';import{useState}from'react';import{useAuth}from'../hooks/useAuth';import{database}from'../services/firebase';import illustrationImg from'../assets/images/illustration.svg';import logoImg from'../assets/images/logo.svg';import googleIconImg from'../assets/images/google-icon.svg';import{Button}from'../components/Button';import'../styles/auth.scss';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export function Home(){var history=useHistory();var _useAuth=useAuth(),user=_useAuth.user,signInWithGoogle=_useAuth.signInWithGoogle;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),roomCode=_useState2[0],setRoomCode=_useState2[1];function handlerCreateRoom(){return _handlerCreateRoom.apply(this,arguments);}function _handlerCreateRoom(){_handlerCreateRoom=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(user){_context.next=3;break;}_context.next=3;return signInWithGoogle();case 3:history.push('/rooms/new');case 4:case\"end\":return _context.stop();}}},_callee);}));return _handlerCreateRoom.apply(this,arguments);}function handleJoinRoom(_x){return _handleJoinRoom.apply(this,arguments);}function _handleJoinRoom(){_handleJoinRoom=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(event){var roomRef;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:event.preventDefault();if(!(roomCode.trim()==='')){_context2.next=3;break;}return _context2.abrupt(\"return\");case 3:_context2.next=5;return database.ref(\"rooms/\".concat(roomCode)).get();case 5:roomRef=_context2.sent;if(roomRef.exists()){_context2.next=9;break;}alert('Room does not exists');return _context2.abrupt(\"return\");case 9:if(!roomRef.val().endedAt){_context2.next=12;break;}alert('Room already closed');return _context2.abrupt(\"return\");case 12:history.push(\"/rooms/\".concat(roomCode));case 13:case\"end\":return _context2.stop();}}},_callee2);}));return _handleJoinRoom.apply(this,arguments);}return/*#__PURE__*/_jsxs(\"div\",{id:\"page-auth\",children:[/*#__PURE__*/_jsxs(\"aside\",{children:[/*#__PURE__*/_jsx(\"img\",{src:illustrationImg,alt:\"Ilustra\\xE7\\xE3o que representa perguntas e respostas\"}),/*#__PURE__*/_jsx(\"strong\",{children:\"Crie salas de Q&A ao-vivo\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Tire as d\\xFAvidas da sua audi\\xEAncia em tempo real\"})]}),/*#__PURE__*/_jsx(\"main\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"main-content\",children:[/*#__PURE__*/_jsx(\"img\",{src:logoImg,alt:\"Letmeask\"}),/*#__PURE__*/_jsxs(\"button\",{onClick:handlerCreateRoom,className:\"create-room\",children:[/*#__PURE__*/_jsx(\"img\",{src:googleIconImg,alt:\"Logo do Google\"}),\"Crie sua sala com o Google\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"separator\",children:\"ou entre em uma sala\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleJoinRoom,children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Digite o c\\xF3digo da sala\",onChange:function onChange(event){return setRoomCode(event.target.value);},value:roomCode}),/*#__PURE__*/_jsx(Button,{type:\"submit\",children:\"Entrar na Sala\"})]})]})})]});}","map":{"version":3,"names":["useHistory","useState","useAuth","database","illustrationImg","logoImg","googleIconImg","Button","Home","history","user","signInWithGoogle","roomCode","setRoomCode","handlerCreateRoom","push","handleJoinRoom","event","preventDefault","trim","ref","get","roomRef","exists","alert","val","endedAt","target","value"],"sources":["/home/alexferro/Documents/GitHub/estudos/rocketseat/nlw-together-reactjs/letmeask/src/pages/Home.tsx"],"sourcesContent":["import { useHistory } from 'react-router-dom'\nimport { FormEvent, useState } from 'react'\n\nimport { useAuth } from '../hooks/useAuth'\nimport { database } from '../services/firebase'\n\nimport illustrationImg from '../assets/images/illustration.svg'\nimport logoImg from '../assets/images/logo.svg'\nimport googleIconImg from '../assets/images/google-icon.svg'\n\nimport { Button } from '../components/Button'\nimport '../styles/auth.scss'\n\nexport function Home(){\n  const history = useHistory();\n  const { user, signInWithGoogle } = useAuth()\n  const [roomCode, setRoomCode] = useState('')\n\n  async function handlerCreateRoom(){\n\n    if (!user){\n      await signInWithGoogle()\n    }\n\n    history.push('/rooms/new');\n  }\n\n  async function handleJoinRoom(event: FormEvent){\n    event.preventDefault();\n\n    if(roomCode.trim() === ''){\n      return;\n    }\n\n    const roomRef = await database.ref(`rooms/${roomCode}`).get();\n\n    if (!roomRef.exists()){\n      alert('Room does not exists');\n      return;\n    }\n\n    if (roomRef.val().endedAt){\n      alert('Room already closed')\n      return;\n    }\n\n    history.push(`/rooms/${roomCode}`);\n  }\n\n  return (\n    <div id='page-auth'>\n      <aside>\n        <img src={illustrationImg} alt=\"Ilustração que representa perguntas e respostas\"/>\n        <strong>Crie salas de Q&amp;A ao-vivo</strong>\n        <p>Tire as dúvidas da sua audiência em tempo real</p>\n      </aside>\n      <main>\n        <div className='main-content'>\n          <img src={logoImg} alt=\"Letmeask\" />\n          <button onClick={handlerCreateRoom} className='create-room'>\n            <img src={googleIconImg} alt=\"Logo do Google\" />\n            Crie sua sala com o Google\n          </button>\n          <div className='separator'>ou entre em uma sala</div>\n          <form onSubmit={handleJoinRoom}>\n            <input\n            type=\"text\"\n            placeholder='Digite o código da sala'\n            onChange={event => setRoomCode(event.target.value)}\n            value={roomCode}\n            />\n            <Button type=\"submit\">\n              Entrar na Sala\n            </Button>\n          </form>\n        </div>\n      </main>\n    </div>\n  )\n}"],"mappings":"qgBAAA,OAASA,UAAT,KAA2B,kBAA3B,CACA,OAAoBC,QAApB,KAAoC,OAApC,CAEA,OAASC,OAAT,KAAwB,kBAAxB,CACA,OAASC,QAAT,KAAyB,sBAAzB,CAEA,MAAOC,gBAAP,KAA4B,mCAA5B,CACA,MAAOC,QAAP,KAAoB,2BAApB,CACA,MAAOC,cAAP,KAA0B,kCAA1B,CAEA,OAASC,MAAT,KAAuB,sBAAvB,CACA,MAAO,qBAAP,C,wFAEA,MAAO,SAASC,KAAT,EAAe,CACpB,GAAMC,QAAO,CAAGT,UAAU,EAA1B,CACA,aAAmCE,OAAO,EAA1C,CAAQQ,IAAR,UAAQA,IAAR,CAAcC,gBAAd,UAAcA,gBAAd,CACA,cAAgCV,QAAQ,CAAC,EAAD,CAAxC,wCAAOW,QAAP,eAAiBC,WAAjB,eAHoB,QAKLC,kBALK,+JAKpB,wIAEOJ,IAFP,+CAGUC,iBAAgB,EAH1B,QAMEF,OAAO,CAACM,IAAR,CAAa,YAAb,EANF,sDALoB,4DAcLC,eAdK,wJAcpB,kBAA8BC,KAA9B,oIACEA,KAAK,CAACC,cAAN,GADF,KAGKN,QAAQ,CAACO,IAAT,KAAoB,EAHzB,2FAOwBhB,SAAQ,CAACiB,GAAT,iBAAsBR,QAAtB,GAAkCS,GAAlC,EAPxB,QAOQC,OAPR,mBASOA,OAAO,CAACC,MAAR,EATP,0BAUIC,KAAK,CAAC,sBAAD,CAAL,CAVJ,6CAcMF,OAAO,CAACG,GAAR,GAAcC,OAdpB,2BAeIF,KAAK,CAAC,qBAAD,CAAL,CAfJ,0CAmBEf,OAAO,CAACM,IAAR,kBAAuBH,QAAvB,GAnBF,yDAdoB,iDAoCpB,mBACE,aAAK,EAAE,CAAC,WAAR,wBACE,sCACE,YAAK,GAAG,CAAER,eAAV,CAA2B,GAAG,CAAC,uDAA/B,EADF,cAEE,qDAFF,cAGE,2EAHF,GADF,cAME,mCACE,aAAK,SAAS,CAAC,cAAf,wBACE,YAAK,GAAG,CAAEC,OAAV,CAAmB,GAAG,CAAC,UAAvB,EADF,cAEE,gBAAQ,OAAO,CAAES,iBAAjB,CAAoC,SAAS,CAAC,aAA9C,wBACE,YAAK,GAAG,CAAER,aAAV,CAAyB,GAAG,CAAC,gBAA7B,EADF,gCAFF,cAME,YAAK,SAAS,CAAC,WAAf,kCANF,cAOE,cAAM,QAAQ,CAAEU,cAAhB,wBACE,cACA,IAAI,CAAC,MADL,CAEA,WAAW,CAAC,4BAFZ,CAGA,QAAQ,CAAE,kBAAAC,KAAK,QAAIJ,YAAW,CAACI,KAAK,CAACU,MAAN,CAAaC,KAAd,CAAf,EAHf,CAIA,KAAK,CAAEhB,QAJP,EADF,cAOE,KAAC,MAAD,EAAQ,IAAI,CAAC,QAAb,4BAPF,GAPF,GADF,EANF,GADF,CA8BD"},"metadata":{},"sourceType":"module"}